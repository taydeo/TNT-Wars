package com.rast.tntwars.commands;

import java.util.ArrayList;
import java.util.List;

import org.bukkit.ChatColor;
import org.bukkit.Location;
import org.bukkit.command.Command;
import org.bukkit.command.CommandExecutor;
import org.bukkit.command.CommandSender;
import org.bukkit.command.TabCompleter;
import org.bukkit.entity.Player;

import com.rast.tntwars.TNTWarsMain;
import com.rast.tntwars.systems.DataConverters;

public class SetPortal {

	/**
	 * This class is for the /setgameportal command and contains the command executor and auto tab events if relevant.
	 * 
	 * @author Raster556
	 */
	
	public class SetSpawn implements TabCompleter, CommandExecutor {

		@Override
		public boolean onCommand(CommandSender sender, Command cmd, String alias, String[] args) {
		
			// We want sender to be player
			if (sender instanceof Player) {
				Player player = (Player) sender;
				
				// Which region do we want to save to
				switch (args[0]) {
				case "LobbyPortal":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamOnePortalOne":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamTwoPortalOne":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamOnePortalTwo":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamTwoPortalTwo":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamOnePortalThree":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamTwoPortalThree":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamOnePortalFour":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamTwoPortalFour":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamOnePortalFive":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamTwoPortalFive":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamOnePortalSix":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamTwoPortalSix":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamOnePortalSeven":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamTwoPortalSeven":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamOnePortalEight":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamTwoPortalEight":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamOnePortalNine":
					savePortalRegion(args[0], player.getLocation());
					break;
				case "TeamTwoPortalNine":
					savePortalRegion(args[0], player.getLocation());
					break;
				default:
					sender.sendMessage(ChatColor.DARK_RED + "Invaled Portal Name");
					break;
				}
			} else {
				sender.sendMessage(ChatColor.DARK_RED + "You must be a player to execute this command!");
			}
		return true;
		}
		
		private void savePortalRegion (String region, Location loc) {
			region = Character.toLowerCase(region.charAt(0)) + region.substring(1);
			TNTWarsMain.configEngine.saveLocation(region, loc);
		}
		
		// Auto Tab Event
		@Override
		public List<String> onTabComplete(CommandSender sender, Command command, String alias, String[] args) {
			
			// Set tab list
			List<String> list = new ArrayList<String>();
			if (args.length == 1) {
				list.add("LobbyPortal");
				
				for (int i = 0; i < TNTWarsMain.configEngine.teamPortals; i++) {
					list.add("TeamOnePortal" + DataConverters.numbToText(i+1));
					list.add("TeamTwoPortal" + DataConverters.numbToText(i+1));
				}
			}
			
			return list;
		}
	}
}
